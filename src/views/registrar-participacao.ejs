<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>Registrar / Cancelar Participa√ß√£o - Semana Acad√™mica</title>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="icon" href="/img/favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="/css/style.css">
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
            display: flex;
            flex-direction: column;
        }

        .card-container {
            flex: 1;
            /* ocupa espa√ßo livre */
            display: flex;
            justify-content: center;
            /* centraliza o card na vertical */
            align-items: center;
            /* centraliza na horizontal */
            padding-bottom: 40px;
            /* espa√ßo extra acima do footer */
        }

        #reader {
            width: 100%;
            max-width: 300px;
            margin: 20px auto;
            display: none;
        }

        #resultado {
            font-size: 16px;
            margin-top: 10px;
            color: #2e7d32;
            text-align: center;
            font-weight: 500;
        }

        #erro {
            font-size: 16px;
            margin-top: 8px;
            color: #d32f2f;
            text-align: center;
            font-weight: 500;
        }

        .btn {
            width: 100%;
        }

        #posicoesGroup {
            display: none;
            margin-top: 15px;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f9f9f9;
        }

        #posicoesGroup label {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            padding: 5px 8px;
            border-radius: 5px;
        }

        #posicoesGroup label:hover {
            background-color: #e0f0ff;
        }

        #posicoesGroup input[type="radio"] {
            margin-right: 10px;
            accent-color: #007bff;
            /* cor do r√°dio */
            transform: scale(1.2);
            /* deixa o bot√£o maior */
        }

        #posicoesGroup span.emoji {
            margin-right: 6px;
            font-size: 1.2em;
        }

        /* cores dos diferentes lugares */
        #posicoesGroup input[value="1"]:checked+.texto {
            color: #d4af37;
            /* dourado */
            font-weight: bold;
        }

        #posicoesGroup input[value="2"]:checked+.texto {
            color: #c0c0c0;
            /* prata */
            font-weight: bold;
        }

        #posicoesGroup input[value="3"]:checked+.texto {
            color: #cd7f32;
            /* bronze */
            font-weight: bold;
        }

        #registroGroup {
            margin-top: 10px;
            padding: 10px 15px;
            background: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
            font-size: 0.95rem;
        }

        #registroGroup p {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        #registroGroup label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
            cursor: pointer;
            padding: 5px 8px;
            border-radius: 5px;
            transition: background 0.2s;
        }

        #registroGroup label:hover {
            background: rgba(0, 0, 0, 0.03);
        }

        #registroGroup input[type="radio"] {
            accent-color: var(--primary-color);
        }

        #registroGroup .texto {
            font-weight: 500;
            color: #444;
        }
    </style>
</head>

<body>
    <nav>
        <h1>
            <a href="/home" class="logo">
                <img src="/img/ifc.webp" alt="Logo" class="logo-img">
                Semana Acad√™mica
            </a>
        </h1>
        <div class="user-info">
            <% if (typeof user !=='undefined' ) { %>
                <span id="userName">
                    <%= typeof user !=='undefined' ? user.username : 'Usu√°rio' %>
                        (<%= typeof user !=='undefined' ? user.role : '' %>)
                </span>
                <a href="/auth/logout" class="logout-btn">Sair</a>
                <% } else { %>
                    <a href="/auth/login" class="login-btn">Login</a>
                    <% } %>
        </div>
    </nav>

    <header>
        <div class="container">
            <div class="breadcrumb">
                <a href="/">In√≠cio</a> &gt; <span>Registrar Participa√ß√£o</span>
            </div>
        </div>
    </header>

    <div class="card-container">
        <div class="card">
            <h3 class="page-title">
                Registrar / Cancelar Participa√ß√£o
            </h3>
            <% if (typeof error !=='undefined' && error) { %>
                <div class="alert alert-danger" role="alert" style="text-align: center;">
                    <%= message %>
                </div>
                <% } else { %>
                    <div class="form-group">
                        <select id="eventoSelect" class="form-control evento-select" autofocus>
                            <option value="">-- Selecione o Evento --</option>
                            <% eventos.forEach(e=> { %>
                                <option value="<%= e.id %>"
                                    class="<% if ((e.primeiroLugar||0) > 0 || (e.segundoLugar||0) > 0 || (e.terceiroLugar||0) > 0) { %>com-medalha<% } %>"
                                    data-primeiro="<%= e.primeiroLugar || 0 %>"
                                    data-segundo="<%= e.segundoLugar || 0 %>"
                                    data-terceiro="<%= e.terceiroLugar || 0 %>">
                                    <% if ((e.primeiroLugar||0)> 0 || (e.segundoLugar||0) > 0 || (e.terceiroLugar||0) >
                                        0) {
                                        %>üèÖ<% } %>
                                            <%= e.nome %>
                                </option>
                                <% }) %>
                        </select>
                    </div>

                    <!-- Grupo de registro -->
                    <div id="registroGroup" style="display:none;">
                        <p><strong>Escolha o tipo de registro:</strong></p>
                        <label><input type="radio" name="posicao" value="participacao"><span class="texto">üìå
                                Participa√ß√£o</span></label>
                        <hr>
                        <label><input type="radio" name="posicao" value="1"><span class="texto">ü•á 1¬∫
                                Lugar</span></label>
                        <label><input type="radio" name="posicao" value="2"><span class="texto">ü•à 2¬∫
                                Lugar</span></label>
                        <label><input type="radio" name="posicao" value="3"><span class="texto">ü•â 3¬∫
                                Lugar</span></label>
                    </div>

                    <div class="button-group">
                        <button id="btnToggle" class="btn btn-success">üîµ Modo: Registrar Participa√ß√£o</button>
                        <button id="btnStart" class="btn btn-primary">üì∑ Iniciar Scanner</button>
                    </div>

                    <div id="reader"></div>

                    <div id="resultado"></div>
                    <div id="erro"></div>
                    <% } %>
        </div>

    </div>

    <footer>
        <div class="footer-content">

            <!-- Informa√ß√µes do site -->
            <div class="footer-info">
                <h3>Semana Acad√™mica</h3>
                <div class="footer-logo">
                    <img src="/img/favicon.svg" alt="F√°brica de Software" class="footer-logo">
                    <img src="/img/ifc.webp" alt="IFC Videira" class="footer-logo">
                </div>

            </div>

            <!-- Redes sociais -->
            <div class="footer-social">
                <h3>Siga-nos</h3>
                <ul>
                    <li><a href="https://www.instagram.com/fsw.ifcvideira/" target="_blank"><i
                                class="fab fa-instagram"></i></a></li>
                    <li>
                        <a href="mailto:fabricadesoftware.videira@ifc.edu.br" target="_blank"><i
                                class="fa fa-envelope"></i>
                        </a>
                    </li>
                </ul>
            </div>

        </div>
    </footer>

    <script src="/js/registrar-participacao.js"></script>
</body>

</html>